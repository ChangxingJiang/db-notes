# Markdown 文档规范

## Markdown 书写规范

### 基本格式
1. 在中文和英文、数字之间添加空格
2. 标题使用 # 符号，不要使用下划线或等号
3. 标题中的代码也需要使用反引号（`）包围
4. 列表项之间不要有空行
5. 强调文本使用 **粗体** 或 *斜体*
6. 标明待完善内容使用【TODO:内容主题】格式

### 代码格式
1. 代码块使用三个反引号（```）标记，并指定语言类型，代码块前后需要空行，代码块不需要缩进
2. 代码引用使用反引号（`）包围，例如：`defer`、`sessVars.StmtCtx.StmtHints.HasResourceGroup`
3. 文件路径应使用反引号包围，例如：`pkg/planner/optimize.go`
4. 函数名称后应加上括号，例如：`Optimize()` 函数，`logicalOptimize()` 函数
5. 在描述代码功能时，应在描述后的括号中添加相关代码引用，例如：
   ```markdown
   系统会设置相应的资源组（`sessVars.StmtCtx.StmtHints.HasResourceGroup`）
   ```
6. 当引用多个相关的代码片段时，应使用"和"连接，例如：
   ```markdown
   检查用户权限（`checker.RequestDynamicVerification(sctx.GetSessionVars().ActiveRoles, "RESOURCE_GROUP_ADMIN", false)` 和 `checker.RequestDynamicVerification(sctx.GetSessionVars().ActiveRoles, "RESOURCE_GROUP_USER", false)`）
   ```

### 链接与媒体
1. 链接文本使用方括号 []，链接地址使用圆括号 ()
2. 图片插入格式为 ![替代文本](图片地址)

### 表格格式
1. 表格使用 | 和 - 构建，对齐方式使用 :---（左对齐）、:---:（居中）、---:（右对齐）
2. 表格示例：
   ```markdown
   | 执行操作 | 级联优化（Cascades） | 火山模型优化（Volcano） |
   |--------------------|:-------------------:|:----------------------:|
   | 调整优化标志位 | ✔ | ✔ |
   ```

### 引用文本格式
1. 使用 Markdown 引用格式（以 > 开头）编写解释性文本段落
2. 引用段落中的内容应是完整的段落，不要使用列表
3. 引用段落中的句子之间应使用适当的标点符号和空格分隔，确保可读性
4. 引用文本示例：
   ```markdown
   > `defer` 是 Go 语言的关键字，用于延迟函数的执行直到当前函数返回。在这里，使用 `defer` 函数确保资源组设置在函数返回前执行，从而保证无论 `Optimize` 函数如何返回（正常返回或发生错误），defer 块中的代码都会被执行。这确保了资源组的设置在整个优化过程结束后才应用，避免中间状态影响优化过程。
   ```

### 列表与参数格式
1. 如果是描述函数参数的列表项，那么参数名和参数含义之间使用中文冒号

## 文档结构规范

### 总体结构

1. 每篇文档应有一个顶级标题，使用一级标题（#）
2. 文档结构应从整体到细节，逐层展开
3. 相关概念应按逻辑顺序排列，保持上下文连贯
4. 复杂流程应配合流程图或表格说明

### 函数文档

函数文档应包含以下部分：

1. 函数签名（使用代码块标记为 Go 语言）
2. 参数说明（列表形式）
3. 返回值说明（列表形式）
4. 执行流程（按步骤详细说明）

如果函数的执行流程超过 1 个步骤，则需要将采用一个步骤、一段说明、一块对应代码的形式书写，样例格式如下：

```markdown
**步骤 1**：步骤 1 名称

步骤 1 详情

代码块

**步骤 2**：步骤 2 名称

......
```

### 表格使用规范

1. 表格应有清晰的表头
2. 表格用于比较不同项目或展示多个相关属性

## 专有名词规范

1. 首次出现的专业术语应提供解释
2. 英文专有名词采用首字母大写形式，如：Cascades、Volcano
3. 一致性术语使用：保持同一概念在整篇文档中使用相同的术语

## 接口和类描述规范

1. 接口定义使用代码块，并标注语言类型
2. 方法说明采用加粗方法名 + 说明文本的形式
3. 接口和实现类的关系应清晰说明

```markdown
**`Optimize` 方法**：

参数：
- `context.Context`：上下文信息
- `LogicalPlan`：待优化的逻辑计划
```

## 算法和流程说明规范

1. 重要算法应提供伪代码或流程图
2. 流程说明应按照时间或逻辑顺序组织
3. 分支逻辑应明确条件和对应处理
